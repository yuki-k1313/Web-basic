<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP Fetch</title>
</head>

<body>

    <script>

        /*
            JSON: 
            - 클라이언트와 서버 간 데이터 교환을 위한 문자열 포맷
            - XML 포맷보다 가볍고 사용성이 뛰어남
            - 자바스크립트 객체 리터럴하고 동일하게 생겼지만 JSON 100% 문자열
        */

        /*
            JSON.stringify : javascript 객체를 JSON 형식의 문자열로 변환
        */
        
        var human = {
            name: '홍길동',
            age: 30
        };
        console.log(human, typeof human);

        var jsonHuman = JSON.stringify(human);
        console.log(jsonHuman, typeof jsonHuman);

        console.log('==============================');

        /*
            JSON.parse() : JSON 형태의 문자열을 자바스크립트의 객체로 변환 
        */
        
        var stringJson = '{\"name\": \"이방원\", \"age\": 55}';
        console.log(stringJson, typeof stringJson);

        var object = JSON.parse(stringJson);
        console.log(object, typeof object);

        console.log('==============================');

        /*
            Fetch API
            - HTTP 요청과 응답을 자바스크립트에서 접근하고 조작할 수 있도록 하는 인터페이스
            - 비동기 함수
            - fetch(url, options);
            - fetch(url, options).then(콜백함수).catch(콜백);
        */

        /*
            Request
        */

        /*
            Response
        */

         // fetch 함수는 기본적으로 GET Request를 보냄
        fetch('http://127.0.0.1:5500/html/A_hello.html');

        fetch('http://127.0.0.1:5500/html/A_hello.html', {
            method: 'POST',
            body: stringJson
        });

        /*
            Response
        */

        var response = fetch('http://127.0.0.1:5500/html/A_hello.html');

        fetch('http://127.0.0.1:5500/html/A_hello.html').then(function(response) {
            console.log('fetch 작업!');
            console.log(response.text());
        });
        console.log('fetch 작업 이후!');

        console.log('==============================');

    </script>

</body>

</html>